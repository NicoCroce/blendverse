import { procedure, protectedProcedure } from '@server/Infrastructure/trpc';
import { {{EntityName}}sService } from '../../Application';
import { executeService } from '@server/Application';
import { paginationZodParams } from '@server/utils/pagination';
import z from 'zod';

export class {{EntityName}}sController {
  constructor(private {{entityName}}sService: {{EntityName}}sService) {}

  get{{EntityName}}s = () =>
    protectedProcedure
      .input(
        z
          .object({
            name: z.string().optional(),
            ...paginationZodParams,
          })
          .optional(),
      )
      .query(
        executeService(this.{{entityName}}sService.get{{EntityName}}s.bind(this.{{entityName}}sService)),
      );

  get{{EntityName}} = () =>
    protectedProcedure
      .input(z.number())
      .query(executeService(this.{{entityName}}sService.get{{EntityName}}.bind(this.{{entityName}}sService)));

  register{{EntityName}} = () =>
    protectedProcedure
      .input(
        z.object({
          name: z.string(),
          // Add your entity properties here
        }),
      )
      .mutation(
        executeService(this.{{entityName}}sService.register{{EntityName}}.bind(this.{{entityName}}sService)),
      );

  update{{EntityName}} = () =>
    protectedProcedure
      .input(
        z.object({
          id: z.number(),
          name: z.string(),
          // Add your update properties here
        }),
      )
      .mutation(
        executeService(this.{{entityName}}sService.update{{EntityName}}.bind(this.{{entityName}}sService)),
      );

  delete{{EntityName}} = () =>
    protectedProcedure
      .input(z.number())
      .mutation(
        executeService(this.{{entityName}}sService.delete{{EntityName}}.bind(this.{{entityName}}sService)),
      );
}
